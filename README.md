# ESA (2022) #
# Bekhterev Alexey, Novichkov Egor. Group 6133

# Practical Work #2 #
## Application using Spring Framework ##

### Subject Area
Для данной лабораторной работы мы выбрали тему простейшей банковской системы. Разработанное веб-приложение дает возможность добавлять клиентов, банки, кредиты для каждого банка, а также возможность пользователям взять кредит в определленном банке. 
Также клиент администратор системы имеет возможность добавить платеж по кредиту у клиента банка.

Также приложение позволяет произвести расчет итоговой суммы процентов по кредиту, а также сумму ежемесячного платежа с учетом процентной ставки.

### Data model
Модель данных включает следующие сущности:
- Клиент (ФИО, Электронная почта, Номер паспорта)
- Банк (Наименование, Список кредитов, Список клиентов)
- Кредит (Тип, Лимит по кредиту, Процентная ставка, Банк)
- Кредитное предложение (Клиент, Банк, Кредит, Сумма кредита, График платежей)
- График платежей (Кредитное предложение, Дата платежа, Сумма платежа, Сумма гашения тела кредита, Сумма гашения процентов)

Схема базы данных:
![image](images/schema.PNG)

### Demo
#### Экраны с клиентами, банками и кредитами представлены в табличном виде
Клиенты
![image](images/clients.PNG)
Банки
![image](images/banks.PNG)
Кредиты
![image](images/credits.PNG)

#### Экран создания кредитного предложения
![image](images/creditOffer.PNG)

#### Информацию о кредитном предложении можно получить из таблицы, нажав кнопку Info. В ней представлены данные о переплате за кредит, минимальной сумме платежа, а также текущем балансе и совершенных платежах.
![image](images/creditOfferInfo.PNG)

#### Также в последней вкладке представлена таблица с платежами
![image](images/payments.PNG)

# Practical Work #3 #
## RESTful web-service ##
Было реализовано REST API для получения списка платежей и произведения оплаты по кредиту, ответ приходит в виде json, либо xml, которые конвертируется в xslt
![image](https://user-images.githubusercontent.com/61648756/212156081-0a415ff6-fcde-42b4-8c55-3347ef35a564.png)
![image](https://user-images.githubusercontent.com/61648756/212156170-c16f1728-a7c0-4c76-a54c-cbddc139c394.png)


# Practical Work #4 #
## Java Message Service ##
 
Были созданы 2 доп таблицы - Логгирование и История емейлов, которые используются для хранения информации об изменении сущности creditOffer,
а также об "отправленных" письмах об этих изменениях. Для реализации был использован AOP подход, тк данная логика независит от бизнес-логики.
Для этого был реализован класс AspectLogging, который по отслеживая сервисы по определенному пути отлавилвает исполнение методов помеченных аннотацией @Loggable,
а затем выполняет отправку сообщения. Данное сообщение содержит необходимую для 2 таблиц информацию. Эти сообщения перехватывают JmsListener'ы которые в свою очередь сохраняют данные об изменениях в бд и производят логгирование.

![image](https://user-images.githubusercontent.com/61648756/212154698-97434053-6bdd-4b0c-aa75-1787feb7d500.png)
